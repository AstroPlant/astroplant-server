{% extends 'website/base.html' %}

{% load static %}
{% load bootstrap3 %}
{% load rules %}

{% block head_ext %}
    <style>
        .sensor-definition
        {
            padding: 1.5em;
            border-bottom: 1px solid #eaeaea;
        }
        
        .sensor-definition div
        {
            margin-bottom: 0.5em;
        }
        
        .sensor-definition-mark
        {
            font-size: 1.35em;
        }
        
        .sensor-definition-mark-official
        {
            color: #6090f0;
        }
        
        .sensor-definition-mark-unofficial
        {
            color: #f09060;
        }
        
        .sensor-definition-name
        {
            vertical-align: text-bottom;
            font-weight: bold;
        }
    </style>
{% endblock %}

{% block header %}
    <h1>Sensor definitions</h1>
{% endblock %}

{% block content %}
    <div class="container">
        {% for sensor_definition in sensor_definitions %}
            {% has_perm 'backend.view_sensor_definition' user sensor_definition as can_view %}
            {% has_perm 'backend.edit_sensor_definition' user sensor_definition as can_edit %}
            
            {% if can_view %}
                <div class="sensor-definition">
                    <div class="sensor-definition-header" title="{% if sensor_definition.official %}Official sensor{% else %}Unofficial sensor{% endif %}">
                        <span class="sensor-definition-mark">
                            {% if sensor_definition.official %}
                                <span class="sensor-definition-mark-official">{% bootstrap_icon "ok-sign" %}</span>
                            {% else %}
                                <span class="sensor-definition-mark-unofficial">{% bootstrap_icon "question-sign" %}</span>
                            {% endif %}
                        </span>
                        
                        <span class="sensor-definition-name">
                            {{ sensor_definition.name }} 
                        </span>
                    </div>
                    <div class="sensor-definition-public">
                        {% if sensor_definition.public %}
                            Public
                        {% else %}
                            Private
                        {% endif %}
                    </div>
                    {% if sensor_definition.owner %}
                        <div class="sensor-definition-owner">
                            Maintainer: {{ sensor_definition.owner }}
                        </div>
                    {% endif %}
                    
                    {% if can_edit %}
                        <p><a href="{% url 'website:sensor_definition_configure' sensor_definition.pk %}">{% bootstrap_icon 'edit' %} Configure definition</a></p>
                    {% endif %}
                </div>
            {% endif %}
        {% endfor %}
    </div>
{% endblock %}
